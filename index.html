<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EmvResellers</title>
    <!-- Tailwind CSS CDN - This loads Tailwind utility classes directly -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts - Outfit -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS for global styles and animations -->
    <style>
        body {
            font-family: 'Outfit', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Keyframes for the Hero section fade-in-up animation */
        @keyframes fadeInUpx {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        /* Class to apply the fade-in-up animation */
        .animate-fade-in-up {
            animation: fadeInUpx 0.8s ease-out forwards;
            opacity: 0; /* Ensures the element starts invisible */
        }
        /* Animation delays for staggered effects */
        .delay-200 { animation-delay: 0.2s; }
        .delay-400 { animation-delay: 0.4s; }

        /* Keyframes for the notification bar fade-in-out animation */
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-20px); } /* Start invisible, slightly above */
            10% { opacity: 1; transform: translateY(0); }  /* Fade in and move to position */
            90% { opacity: 1; transform: translateY(0); }  /* Stay visible for most of the duration */
            100% { opacity: 0; transform: translateY(-20px); } /* Fade out and move up */
        }
        /* Class to apply the notification animation */
        .notification-appear {
            animation: fadeInOut 3s ease-in-out forwards; /* 3 seconds total duration */
        }

        /* Styles for the image viewer modal */
        .image-viewer-modal-content {
            max-width: 90vw; /* Limit width to 90% of viewport width */
            max-height: 90vh; /* Limit height to 90% of viewport height */
            overflow: hidden; /* Hide overflow if content is too big */
        }

        .image-viewer-modal-image {
            max-width: 100%;
            max-height: 70vh; /* Make image responsive within modal */
            object-fit: contain; /* Ensure image fits without cropping */
        }

        /* Custom scrollbar for modal content */
        .custom-scrollbar::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #4a5568; /* Tailwind gray-700 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #ecc94b; /* Tailwind yellow-400 */
            border-radius: 10px;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: #d69e2e; /* Darker yellow on hover */
        }

        /* Simple loading spinner */
        .loader {
            border: 4px solid #f3f3f3; /* Light grey */
            border-top: 4px solid #ecc94b; /* Yellow */
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900">
    <div id="root"></div>

    <!-- React and ReactDOM CDNs -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Firebase SDK (latest CDN links) -->
    <script type="module">
        // Import specific Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js"; // Removed signInWithCustomToken as it's not used directly here
        import { getFirestore, collection, addDoc, query, onSnapshot, doc, updateDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"; // Removed orderBy as it was removed from query

        // Expose Firebase modules globally for the Babel script
        window.firebase = { initializeApp, getAuth, signInAnonymously, onAuthStateChanged, getFirestore, collection, addDoc, query, onSnapshot, doc, updateDoc, serverTimestamp };
    </script>
    
    <!-- React DOM specific for createRoot (React 18) -->
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>


    <!-- Your React App Code -->
    <script type="text/babel">
        // Main App Component
        function App() {
            // Console log to check if the App component starts rendering
            console.log('App component started rendering');

            // State for Firebase instances and user info
            const [db, setDb] = React.useState(null);
            const [auth, setAuth] = React.useState(null);
            const [userId, setUserId] = React.useState(null);
            const [isAuthReady, setIsAuthReady] = React.useState(false); // Tracks if Firebase auth is initialized

            // State to manage the shopping cart items
            const [cart, setCart] = React.useState([]);
            // State to control the visibility of the cart modal
            const [isCartOpen, setIsCartOpen] = React.useState(false);
            // State for the notification message and visibility
            const [notification, setNotification] = React.useState({ message: '', visible: false });
            // State for the image viewer modal
            const [isImageViewerOpen, setIsImageViewerOpen] = React.useState(false);
            const [currentImageViewProduct, setCurrentImageViewProduct] = React.useState(null);
            const [currentImageIndex, setCurrentImageIndex] = React.useState(0);
            // State for legal/privacy modal
            const [isLegalModalOpen, setIsLegalModalOpen] = React.useState(false);
            const [currentLegalTab, setCurrentLegalTab] = React.useState('terms'); // 'terms' or 'privacy'
            // State for order history (now fetched from Firestore)
            const [orderHistory, setOrderHistory] = React.useState([]);
            // State for payment modal (for displaying NOWPayments URL)
            const [paymentModal, setPaymentModal] = React.useState({ visible: false, message: '', url: null });
            // State for loading indicator during checkout
            const [isCheckoutLoading, setIsCheckoutLoading] = React.useState(false);
            // State for scroll-to-top button visibility
            const [showScrollToTop, setShowScrollToTop] = React.useState(false);


            // Firebase Initialization and Authentication
            React.useEffect(() => {
                const initializeFirebase = async () => {
                    try {
                        // Your web app's Firebase configuration (copied directly from Firebase Console)
                        const firebaseConfig = {
                            apiKey: "AIzaSyA1IWKWdFEdFeHavyc6Sycf22vVUnwdNKo",
                            authDomain: "emvsells-ac9a5.firebaseapp.com",
                            projectId: "emvsells-ac9a5",
                            storageBucket: "emvsells-ac9a5.firebasestorage.app",
                            messagingSenderId: "883386311812",
                            appId: "1:883386311012:web:d5b5c3a5d430d1a9a4da71",
                            measurementId: "G-1SECW7N9LF" // Optional, if you're using Analytics
                        };

                        // Initialize Firebase app
                        const app = firebase.initializeApp(firebaseConfig);
                        const firestore = firebase.getFirestore(app);
                        const authInstance = firebase.getAuth(app);

                        setDb(firestore);
                        setAuth(authInstance);

                        console.log("Frontend: Firebase app initialized.");

                        // Listen for authentication state changes
                        const unsubscribe = firebase.onAuthStateChanged(authInstance, async (user) => {
                            if (user) {
                                // User is signed in (either anonymously or via custom token)
                                setUserId(user.uid);
                                console.log("Frontend: Firebase Auth: User signed in with ID:", user.uid);
                            } else {
                                // No user is signed in, attempt anonymous sign-in
                                try {
                                    const anonUserCred = await firebase.signInAnonymously(authInstance);
                                    setUserId(anonUserCred.user.uid);
                                    console.log("Frontend: Firebase Auth: Signed in anonymously with ID:", anonUserCred.user.uid);
                                } catch (authError) {
                                    console.error("Frontend: Firebase Auth Error during anonymous sign-in:", authError.message, authError.code);
                                    setUserId(null); // Explicitly set to null if auth fails
                                    showNotification(`Authentication failed: ${authError.message}. Order history may not save.`);
                                }
                            }
                            setIsAuthReady(true); // Mark authentication state as checked/ready
                        });

                        // Cleanup the auth state change listener when the component unmounts
                        return () => unsubscribe();

                    } catch (initError) {
                        console.error("Frontend: Firebase App Initialization Failed:", initError.message, initError);
                        setUserId(null); // Ensure no old ID is lingering
                        setIsAuthReady(true);
                        showNotification(`Firebase setup error: ${initError.message}. Order history may not save.`);
                    }
                };

                initializeFirebase();
            }, []); // Empty dependency array ensures this effect runs only once on mount

            // Fetch order history from Firestore when Firebase and user are ready
            React.useEffect(() => {
                // Ensure Firebase is initialized and a userId is available before attempting to fetch
                if (isAuthReady && db && userId && auth) { // Added 'auth' dependency for safety
                    // Use the Firebase project ID as the base app ID for Firestore paths
                    const currentAppId = auth.app.options.projectId; 
                    console.log(`Frontend: Fetching orders for user ${userId} in app ${currentAppId}`);
                    const ordersCollectionRef = firebase.collection(db, `artifacts/${currentAppId}/users/${userId}/orders`);
                    
                    const q = firebase.query(ordersCollectionRef);

                    // Set up a real-time listener for the orders collection
                    const unsubscribe = firebase.onSnapshot(q, (snapshot) => {
                        const fetchedOrders = snapshot.docs.map(doc => ({
                            id: doc.id, // Document ID from Firestore
                            ...doc.data() // All fields of the document
                        }));
                        // Sort by timestamp in descending order (most recent first)
                        fetchedOrders.sort((a, b) => (b.timestamp || 0) - (a.timestamp || 0));
                        setOrderHistory(fetchedOrders);
                        console.log("Frontend: Order history fetched.");
                    }, (error) => {
                        console.error("Frontend: Error fetching order history:", error.message, error.code);
                        showNotification(`Failed to load order history: ${error.message}.`);
                    });

                    // Cleanup the snapshot listener when the component unmounts or dependencies change
                    return () => unsubscribe();
                } else if (isAuthReady && !userId) {
                    console.log("Frontend: Firebase auth ready but no user ID. Cannot fetch orders yet.");
                }
            }, [isAuthReady, db, userId, auth]); // Added 'auth' as dependency as it's used to get projectId

            // Function to show a temporary notification
            const showNotification = (message) => {
                setNotification({ message, visible: true });
                setTimeout(() => {
                    setNotification(prev => ({ ...prev, visible: false }));
                }, 3000);
            };

            // Function to add an item to the cart
            const addToCart = (product) => {
                setCart(prevCart => {
                    const existingItem = prevCart.find(item => item.id === product.id);
                    if (existingItem) {
                        showNotification(`${product.name} is already in your cart!`);
                        return prevCart;
                    } else {
                        showNotification(`${product.name} added to cart!`);
                        return [...prevCart, { ...product, quantity: 1 }];
                    }
                });
            };

            // Function to remove an item from the cart
            const removeFromCart = (productId) => {
                setCart(prevCart => {
                    const itemToRemove = prevCart.find(item => item.id === productId);
                    if (itemToRemove) {
                        showNotification(`${itemToRemove.name} removed from cart.`);
                    }
                    return prevCart.filter(item => item.id !== productId);
                });
            };

            // Function to open the image viewer modal
            const openImageViewer = (product, initialIndex = 0) => {
                setCurrentImageViewProduct(product);
                setCurrentImageIndex(initialIndex);
                setIsImageViewerOpen(true);
            };

            // Function to close the image viewer modal
            const closeImageViewer = () => {
                setIsImageViewerOpen(false);
                setCurrentImageViewProduct(null);
                setCurrentImageIndex(0);
            };

            // Function to navigate to the next image in the viewer
            const nextImage = () => {
                if (currentImageViewProduct && currentImageViewProduct.images) {
                    setCurrentImageIndex((prevIndex) =>
                        (prevIndex + 1) % currentImageViewProduct.images.length
                    );
                }
            };

            // Function to navigate to the previous image in the viewer
            const prevImage = () => {
                if (currentImageViewProduct && currentImageViewProduct.images) {
                    setCurrentImageIndex((prevIndex) =>
                        (prevIndex - 1 + currentImageViewProduct.images.length) %
                        currentImageViewProduct.images.length
                    );
                }
            };

            // Function to handle checkout (now interacts with Firestore and simulates backend call)
            const proceedToCheckout = async () => {
                // Ensure db and userId are available before proceeding
                if (!db || !userId) {
                    console.error("Checkout: Firestore DB or User ID not available.");
                    showNotification("Account system not ready. Please wait a moment for authentication to complete.");
                    return;
                }
                if (cart.length === 0) {
                    showNotification("Your cart is empty. Add items before checking out.");
                    return;
                }

                setIsCheckoutLoading(true); // Show loading spinner

                // Use the Firebase project ID as the base app ID for Firestore paths
                // This 'auth.app.options.projectId' comes directly from your frontend's firebaseConfig
                const currentAppId = auth.app.options.projectId;

                // Prepare order data to be sent to backend AND stored in Firestore
                const orderData = {
                    items: cart.map(item => ({
                        id: item.id,
                        name: item.name,
                        price: item.price,
                        quantity: item.quantity,
                    })),
                    total: totalPrice,
                    date: new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }),
                    time: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }),
                    timestamp: firebase.serverTimestamp(), // Use Firestore server timestamp
                    status: 'pending_payment', // Initial status in Firestore
                    userId: userId, // Associate order with current user
                };

                try {
                    // --- STEP 1: Add order to Firestore with 'pending_payment' status ---
                    console.log(`Checkout: Adding order to Firestore for user ${userId} in app ${currentAppId}`);
                    const ordersCollectionRef = firebase.collection(db, `artifacts/${currentAppId}/users/${userId}/orders`);
                    const docRef = await firebase.addDoc(ordersCollectionRef, orderData);
                    const firestoreOrderId = docRef.id; // Get the ID generated by Firestore

                    console.log("Checkout: Order added to Firestore with ID:", firestoreOrderId);

                    // --- STEP 2: Make a REAL Backend Call to your deployed server ---
                    // REMEMBER TO REPLACE THIS URL WITH YOUR ACTUAL DEPLOYED BACKEND URL!
                    const backendUrl = "http://localhost:5000/create-payment-invoice"; // <<< REPLACE THIS FOR DEPLOYMENT
                    console.log(`Checkout: Calling backend: ${backendUrl} with order:`, { ...orderData, firestoreOrderId });

                    const response = await fetch(backendUrl, {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            orderData: { ...orderData, firestoreOrderId: firestoreOrderId }, // Pass the Firestore ID
                            userId: userId,
                            appId: currentAppId // Pass the app ID to the backend for path construction
                        }),
                    });

                    // Check if response is OK (HTTP status 200-299)
                    if (!response.ok) {
                        const errorBody = await response.json().catch(() => ({ message: "Unknown backend error" }));
                        throw new Error(`Backend request failed: ${response.status} ${response.statusText} - ${errorBody.message}`);
                    }

                    const backendResult = await response.json();

                    if (backendResult.success) { // Check custom 'success' field from backend
                        // --- STEP 3: Update Firestore order with NOWPayments details from backend response ---
                        console.log("Checkout: Backend call successful. Updating Firestore with payment details.");
                        const orderDocRef = firebase.doc(db, `artifacts/${currentAppId}/users/${userId}/orders/${firestoreOrderId}`);
                        await firebase.updateDoc(orderDocRef, {
                            nowpayments_invoice_id: backendResult.nowpayments_payment_id,
                            nowpayments_payment_url: backendResult.payment_url,
                            status: 'awaiting_payment' // Update status to reflect payment pending on NOWPayments
                        });
                        
                        setCart([]); // Clear the cart
                        setIsCartOpen(false); // Close cart modal

                        setPaymentModal({
                            visible: true,
                            message: `Payment initiated for Order ID: ${firestoreOrderId}. Please complete the payment on the next page.`,
                            url: backendResult.payment_url
                        });
                        window.open(backendResult.payment_url, '_blank'); // Open NOWPayments page

                    } else {
                        // If backend reports non-success, update Firestore status to indicate an issue
                        const orderDocRef = firebase.doc(db, `artifacts/${currentAppId}/users/${userId}/orders/${firestoreOrderId}`);
                        const errorMessage = backendResult.message || "Unknown error from backend.";
                        await firebase.updateDoc(orderDocRef, { status: 'payment_failed_initiation', error_message: errorMessage });
                        showNotification(`Payment initiation failed: ${errorMessage}`);
                    }

                } catch (error) {
                    console.error("Checkout process error on frontend:", error.message, error);
                    showNotification(`There was an error during checkout: ${error.message}. Please try again.`);
                    // If an error occurred *after* initial Firestore write but *before* backend response
                    // or other network issues, the order might be stuck at 'pending_payment'.
                    // You might want more specific handling here to update its status based on where the error occurred.
                } finally {
                    setIsCheckoutLoading(false); // Hide loading spinner
                }
            };


            // Effect to handle scroll-to-top button visibility
            React.useEffect(() => {
                const handleScroll = () => {
                    // Show button if scrolled down more than 300px
                    if (window.scrollY > 300) {
                        setShowScrollToTop(true);
                    } else {
                        setShowScrollToTop(false);
                    }
                };

                window.addEventListener('scroll', handleScroll);
                // Clean up the event listener when the component unmounts
                return () => {
                    window.removeEventListener('scroll', handleScroll);
                };
            }, []);

            // Function to scroll to the top of the page
            const scrollToTop = () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth' // Smooth scroll animation
                });
            };

            // Define software products with updated prices and image URLs
            const softwareProducts = [
                {
                    id: 'cardpeak',
                    name: 'Cardpeak',
                    description: 'CardPeak is free and open source software that is used to read and display data from chip-based (EMV) cards using a smart card reader. Itâ€™s typically used for testing, verifying, or analyzing card information in environments like payment development or security research.',
                    price: 0.00,
                    size: '6.4MB', // Added size
                    images: [
                        'https://i.imgur.com/Tr1njo5.png', // New Cardpeak image 1
                        'https://i.imgur.com/I7E1tV0.png', // New Cardpeak image 2
                        'https://i.imgur.com/fHKzDKy.png'  // New Cardpeak image 3
                    ]
                },
                {
                    id: 'x2allinone',
                    name: 'X2 Allinone',
                    description: 'X2 Allinone is software used to generate, edit, and manage EMV chip card data, including track data and cryptographic elements. It\'s typically used for testing and developing EMV card systems, such as verifying how chip data responds during transactions.',
                    price: 7.99,
                    size: '21.1MB', // Added size
                    images: [
                        'https://i.imgur.com/VImciqR.png', // X2 Allinone image 1
                        'https://i.imgur.com/6TAbQBX.png',  // X2 Allinone image 2
                        'https://i.imgur.com/zn8oglQ.png',  // X2 Allinone image 3
                        'https://i.imgur.com/yzY5EK5.png'    // X2 Allinone image 4
                    ]
                },
                {
                    id: 'arqcgen',
                    name: 'ARQC Gen',
                    description: 'ARQC Gen is software used to generate ARQC (Authorization Request Cryptogram) values for EMV chip cards. Itâ€™s typically used for testing and simulating EMV transaction behavior in payment system development and security research.',
                    price: 6.99,
                    size: '72KB', // Added size
                    images: [
                        'https://i.imgur.com/B945U4Q.png' // Updated ARQC Gen image
                    ]
                },
                {
                    id: 'atrtool',
                    name: 'ATR Tool',
                    description: 'ATR Tool is software used to read and analyze the ATR (Answer to Reset) from smart cards. It helps identify the card type, supported protocols, and communication parameters, and is commonly used in smart card development, testing, and debugging.',
                    price: 4.99,
                    size: '625KB', // Added size
                    images: [
                        'https://i.imgur.com/HtvRz5i.jpeg' // Updated ATR Tool image
                    ]
                },
                {
                    id: 'istfiles',
                    name: 'IST Files',
                    description: 'IST files are data files used to store EMV card information, such as track data, chip data, and cryptographic values. They are used in EMV software to load, manage, and simulate card profiles during card testing or development.',
                    price: 4.99,
                    size: '19.2MB', // Added size
                    images: [
                        'https://i.imgur.com/Qm5FU7t.jpeg' // Updated IST Files image
                    ]
                },
                {
                    id: 'jcopenglish',
                    name: 'Jcop English',
                    description: 'JCOP English is software used to manage and program JCOP smart cards. It allows users to load applets, configure card settings, and personalize chip data for use in smart card development, testing, and secure application deployment.',
                    price: 3.99,
                    size: '4.9MB', // Added size
                    images: [
                        'https://i.imgur.com/VhjQ1lw.png' // Updated Jcop English image
                    ]
                },
            ];

            // Calculate total items in cart for the icon badge
            const totalItemsInCart = cart.reduce((total, item) => total + item.quantity, 0);
            // Calculate total price of items in cart
            const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0).toFixed(2);

            // FAQ data
            const faqItems = [
                {
                    question: "What types of EMV software do you offer?",
                    answer: "We offer tools for reading and analyzing EMV chip data, generating ARQC values, editing track and chip data, managing JCOP smart cards, and testing card behavior. These include software for development, debugging, cryptographic testing, and secure card personalization."
                },
                {
                    question: "How do I receive the software after purchase?",
                    answer: "Upon successful payment, you will receive secure download links for your purchased software. Details will be provided during the checkout process and via email."
                },
                {
                    question: "Is the software virus and malware free?",
                    answer: "We have rigorously tested our software with VirusTotal and numerous other reputable security tools. These comprehensive scans consistently show no viruses or malware, ensuring the integrity and safety of our downloads for our customers."
                },
                {
                    question: "What if I encounter issues with the software?",
                    answer: "For any technical support or inquiries, please contact us via Telegram . Our support team will assist you with installation, usage, or any other issues you may face."
                },
                {
                    question: "Are your software products legal to use?",
                    answer: "Our software products are intended for legal purposes only, such as testing, development, and research in secure environments. Users are responsible for ensuring their use complies with all applicable laws and regulations."
                },
                {
                    question: "What payment methods do we accept?", // NEW FAQ entry
                    answer: "For your security and anonymity, we exclusively accept cryptocurrency payments. This ensures fast, secure, and private transactions for all our customers. We support various cryptocurrencies. Specific payment instructions will be provided during checkout. Please note that prices are subject to change based on cryptocurrency market fluctuations."
                }
            ];

            // Reorder FAQ items to place "What payment methods do we accept?" as the 2nd one.
            const reorderedFaqItems = [
                faqItems[0], // What types of EMV software do you offer?
                faqItems[5], // What payment methods do you accept? (NEW item)
                faqItems[1], // How do I receive the software after purchase?
                faqItems[2], // Is the software virus and malware free?
                faqItems[3], // What if I encounter issues with the software?
                faqItems[4], // Are your software products legal to use?
            ];


            const termsOfServiceContent = `
                ## EmvResellers Terms of Service

                **Last Updated:** June 11, 2025

                Welcome to EmvResellers. By accessing or using our website and purchasing our software products, you agree to comply with and be bound by the following Terms of Service. Please review these terms carefully.

                **1. Acceptance of Terms**
                By using this website, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service. If you do not agree with any part of these terms, you must not use our website or purchase our products.

                **2. Nature of Software Products**
                EmvResellers provides software products primarily for testing, development, and research purposes related to EMV technology. Users are solely responsible for ensuring that their use of our software complies with all applicable local, national, and international laws and regulations. We do not condone or support the use of our software for any illegal or fraudulent activities.

                **3. Software Legitimacy and Safety**
                We rigorously test our software with VirusTotal and numerous other reputable security tools. These comprehensive scans consistently show no viruses or malware, ensuring the integrity and safety of our downloads. However, users are ultimately responsible for their own security practices, including running up-to-date antivirus software.

                **4. Cryptocurrency Payments**
                All transactions on EmvResellers are conducted exclusively via cryptocurrency payments. This method is chosen to enhance the security and anonymity of our customers. Specific payment instructions will be provided at checkout. Due to the volatile nature of cryptocurrencies, prices may fluctuate.

                **5. Product Delivery**
                Upon successful and confirmed cryptocurrency payment, secure download links for purchased software will be provided. Details will be communicated through the checkout process and other specified secure channels.

                **6. Limitation of Liability**
                EmvResellers shall not be liable for any direct, indirect, incidental, special, consequential, or exemplary damages, including but not limited to, damages for loss of profits, goodwill, data, or other intangible losses resulting from the use or inability to use our website or products.

                **7. No Warranties**
                Our software products are provided "as is" without any warranties, express or implied, including but not limited to the implied warranties of merchantability, fitness for a particular purpose, or non-infringement. We do not warrant that the software will be error-free or that access to the website will be uninterrupted.

                **8. User Responsibilities**

                * Users must ensure they have the necessary technical knowledge to use our software.

                * Users are responsible for maintaining the confidentiality of any download links or other access credentials.

                * Users must comply with all applicable laws and regulations in their use of our software.

                **9. Changes to Terms**
                We reserve the right to modify these Terms of Service at any time. Any changes will be effective immediately upon posting on the website. Your continued use of the website after such modifications will will constitute your acknowledgment of the modified terms and agreement to abide and be bound by them.

                **10. Governing Law**
                These Terms of Service shall be governed by and construed in accordance with the laws applicable to our jurisdiction, without regard to its conflict of law principles.

                **11. Contact**
                For any questions regarding these Terms of Service, please contact us via Telegram as indicated on our website.
            `;

            const privacyPolicyContent = `
                ## EmvResellers Privacy Policy

                **Last Updated:** June 11, 2025

                Your privacy and anonymity are paramount to EmvResellers. This Privacy Policy outlines our commitment to minimal data collection and safeguarding your information when you use our website and purchase our software.

                **1. Our Commitment to Anonymity**
                We prioritize the privacy of our users above all else. Our operational model is designed to minimize the collection of personal identifying information (PII). We do not require or collect your name, email address, physical address, phone number, or any other data that could directly identify you.

                **2. Information We Collect (Minimal Data)**

                * **Transaction Information:** When you make a purchase, we collect only the necessary information pertaining to the cryptocurrency transaction (e.g., transaction ID, cryptocurrency type, amount). This data is essential for verifying payments and facilitating product delivery. This information is not linked to any personal identity.

                * **Website Usage Data (Anonymized):** We may collect basic, non-identifying data about website traffic and usage patterns (e.g., pages visited, time spent on site, browser type). This data is collected in an **anonymized** and aggregated form (e.g., via generic server logs) and cannot be used to identify individual users. We do not use tracking cookies or analytics tools that collect personal data.

                **3. How We Use Information (Purpose-Limited)**
                The limited information we collect is used solely for the following purposes:

                * To process and verify your cryptocurrency payments.

                * To deliver your purchased software securely.

                * To improve our website's functionality and user experience through anonymized traffic analysis.

                * To respond to direct support inquiries via our Telegram, where you control the information you share.

                **4. Data Sharing and Disclosure (None)**
                EmvResellers **does not share, sell, rent, or disclose any information (including anonymized data) with third parties** for marketing, advertising, or any other purpose. Our commitment to your anonymity means your usage data and transaction details remain with us, strictly for the purposes outlined above.

                **5. Data Retention**
                Transaction information is retained only for the duration necessary to verify payment and ensure successful product delivery. Anonymized usage data is aggregated and not retained in a form that could ever be linked to an individual. We strive to retain data for the shortest possible period consistent with operational necessity.

                **6. Security Measures**
                We implement industry-standard security measures to protect the integrity of our website and the minimal data we do handle. However, no method of transmission over the Internet or electronic storage is 100% secure.

                **7. External Links**
                Our website may contain links to external sites (e.g., Telegram). Please be aware that we are not responsible for the privacy practices of these other sites. We encourage you to read the privacy statements of any other site that collects personally identifiable information.

                **8. Children's Privacy**
                Our website is not directed at children under the age of 18, and we do not knowingly collect any information from children.

                **9. Changes to this Privacy Policy**
                We may update this Privacy Policy from time to time. Any changes will be posted on this page with an updated "Last Updated" date. We encourage you to review this policy periodically.

                **10. Contact**
                For any questions regarding this Privacy Policy or your data, please contact us via our Telegram channel as indicated on our website.
            `;

            return (
                <div className="bg-gray-900 text-gray-200 min-h-screen flex flex-col">
                    {/* Notification Bar */}
                    {notification.visible && (
                        <div className="fixed top-0 left-0 w-full z-50 p-4 flex justify-center notification-appear">
                            <div className="bg-yellow-500 text-gray-900 font-semibold py-3 px-6 rounded-full shadow-lg">
                                {notification.message}
                            </div>
                        </div>
                    )}

                    {/* Checkout Payment Modal */}
                    {paymentModal.visible && (
                        <div className="fixed inset-0 bg-gray-900 bg-opacity-75 flex justify-center items-center z-50 p-4">
                            <div className="bg-gray-800 rounded-lg shadow-xl w-full max-w-sm md:max-w-lg p-5 md:p-6 relative text-center">
                                <h2 className="text-2xl md:text-3xl font-bold text-yellow-400 mb-4">Payment Required</h2>
                                <p className="text-gray-300 text-base md:text-lg mb-6">{paymentModal.message}</p>
                                {paymentModal.url && (
                                    <a
                                        href={paymentModal.url}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        className="inline-block bg-green-500 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-600 transition duration-300 mb-4"
                                    >
                                        Go to Payment Page
                                    </a>
                                )}
                                <button
                                    onClick={() => setPaymentModal({ visible: false, message: '', url: null })}
                                    className="bg-yellow-500 text-gray-900 font-bold py-2 px-6 rounded-lg hover:bg-yellow-600 transition duration-300 ml-2"
                                >
                                    Close
                                </button>
                            </div>
                        </div>
                    )}

                    {/* Header */}
                    <header className="bg-gray-800 shadow-lg py-4">
                        {/* Container with responsive padding for better mobile fit */}
                        <div className="container mx-auto px-4 sm:px-6 lg:px-8 flex flex-col sm:flex-row justify-between items-center">
                            {/* Logo and Title */}
                            <div className="flex items-center space-x-2 mb-4 sm:mb-0 w-full sm:w-auto justify-center">
                                <img src="https://i.imgur.com/uGwKStG.png" alt="EmvResellers Logo" className="h-14 sm:h-16 w-auto rounded-full" />  
                                <h1 className="text-2xl sm:text-3xl font-bold text-yellow-400">EmvResellers</h1>  
                            </div>
                            {/* Navigation and Cart Icon */}
                            <nav className="flex flex-col sm:flex-row items-center space-y-4 sm:space-y-0 sm:space-x-6 w-full sm:w-auto mt-4 sm:mt-0">
                                <ul className="flex space-x-4 sm:space-x-6 w-full sm:w-auto justify-center sm:justify-start">  
                                    <li><a href="#home" className="text-gray-300 hover:text-yellow-400 transition duration-300 text-sm sm:text-base">Home</a></li>
                                    <li><a href="#products" className="text-gray-300 hover:text-yellow-400 transition duration-300 text-sm sm:text-base">Products</a></li>
                                    <li><a href="#faq" className="text-gray-300 hover:text-yellow-400 transition duration-300 text-sm sm:text-base">FAQ</a></li>
                                    <li><a href="#order-history" className="text-gray-300 hover:text-yellow-400 transition duration-300 text-sm sm:text-base">Order History</a></li>
                                    <li><a href="#contact" className="text-gray-300 hover:text-yellow-400 transition duration-300 text-sm sm:text-base">Contact</a></li>
                                    <li>
                                        <button
                                            onClick={() => setIsLegalModalOpen(true)}
                                            className="text-gray-300 hover:text-yellow-400 transition duration-300 text-sm sm:text-base focus:outline-none"
                                        >
                                            Legal & Privacy
                                        </button>
                                    </li>
                                </ul>
                                {/* Cart Icon with Item Count */}
                                <button
                                    onClick={() => setIsCartOpen(true)}
                                    className="relative text-gray-300 hover:text-yellow-400 transition duration-300 p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-yellow-500 mt-2 sm:mt-0"
                                    aria-label="View shopping cart"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                                    </svg>
                                    {totalItemsInCart > 0 && (
                                        <span className="absolute -top-1 -right-1 bg-red-600 text-white text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center">
                                            {totalItemsInCart}
                                        </span>
                                    )}
                                </button>
                            </nav>
                        </div>
                    </header>

                    {/* Hero Section */}
                    <section id="home" className="relative bg-gray-900 py-16 md:py-20 flex items-center justify-center text-center overflow-hidden px-4">
                        <div className="absolute inset-0 bg-gradient-to-br from-gray-950 to-gray-800 opacity-70"></div>
                        <div className="relative z-10 container mx-auto">
                            <h2 className="text-4xl md:text-5xl lg:text-6xl font-extrabold text-yellow-400 leading-tight mb-4 animate-fade-in-up">
                                Unlock Your Potential with Our Cutting-Edge Emv Software
                            </h2>
                            <p className="text-lg md:text-xl text-gray-300 mb-8 max-w-3xl mx-auto animate-fade-in-up delay-200">
                                The Safe & Anonymous Way to Obtain Emv Softwares
                            </p>
                            <a href="#products" className="inline-block bg-yellow-500 text-gray-900 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-yellow-600 transition duration-300 transform hover:scale-105 animate-fade-in-up delay-400 text-base sm:text-lg">
                                Explore Software
                            </a>
                        </div>
                    </section>

                    {/* Products Section */}
                    <section id="products" className="py-16 md:py-24 bg-gray-900 flex-grow px-4">
                        <div className="container mx-auto">
                            <h2 className="text-3xl sm:text-4xl font-bold text-center text-yellow-400 mb-10 md:mb-12">Our Emv Softwares ðŸ’»</h2>

                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8">  
                                {softwareProducts.map(product => (
                                    <div key={product.id} className="bg-gray-800 p-6 md:p-8 rounded-xl shadow-lg border border-gray-700 hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">  
                                        <h3 className="text-2xl md:text-3xl font-semibold text-yellow-300 mb-3 md:mb-4">{product.name}</h3>  
                                        {/* Added software size display */}
                                        {product.size && (
                                            <p className="text-gray-400 text-sm mb-4">Size: {product.size}</p>
                                        )}
                                        {/* Added a consistent height to the description for better alignment */}
                                        <p className="text-gray-300 leading-relaxed text-sm md:text-base min-h-[60px] flex items-center">{product.description}</p>  
                                        <div className="flex items-center justify-between mt-4"> {/* Adjusted margin-top */}
                                            <span className="text-xl md:text-2xl font-bold text-yellow-400 mr-4 whitespace-nowrap">  
                                                {product.price === 0.00 ? 'Free' : `$${product.price.toFixed(2)}`}
                                            </span>
                                            {/* Button Container - Ensured consistent width and vertical alignment */}
                                            <div className="flex space-x-3 flex-shrink-0 items-center" style={{ width: '192px' }}>  
                                                {product.images && product.images.length > 0 && (
                                                    <button
                                                        onClick={() => openImageViewer(product)}
                                                        className="w-1/2 bg-gray-600 text-gray-200 font-bold py-2 px-3 rounded-lg hover:bg-gray-500 transition duration-300 text-sm md:text-base flex items-center justify-center whitespace-nowrap"
                                                    >
                                                        View
                                                    </button>
                                                )}
                                                <button
                                                    onClick={() => addToCart(product)}
                                                    className="w-1/2 bg-yellow-500 text-gray-900 font-bold py-2 px-3 rounded-lg hover:bg-yellow-600 transition duration-300 text-sm md:text-base flex items-center justify-center whitespace-nowrap"  
                                                >
                                                    Add to Cart
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* FAQ Section */}
                    <section id="faq" className="py-16 md:py-20 bg-gray-800 px-4">  
                        <div className="container mx-auto">
                            <h2 className="text-3xl sm:text-4xl font-bold text-center text-yellow-400 mb-10 md:mb-12">Frequently Asked Questions ðŸ™‹â€â™‚ï¸</h2>
                            <div className="space-y-6">
                                {reorderedFaqItems.map((item, index) => (
                                    <div key={index} className="bg-gray-700 p-6 rounded-lg shadow-md border border-gray-600">
                                        <h3 className="text-xl md:text-2xl font-semibold text-yellow-300 mb-2">{item.question}</h3>
                                        <p className="text-gray-300 text-base md:text-lg">{item.answer}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </section>

                    {/* Order History Section */}
                    <section id="order-history" className="py-16 md:py-20 bg-gray-900 px-4">
                        <div className="container mx-auto">
                            <h2 className="text-3xl sm:text-4xl font-bold text-center text-yellow-400 mb-10 md:mb-12">Your Order History ðŸ“œ</h2>
                            {!isAuthReady ? (
                                <p className="text-gray-400 text-center text-lg md:text-xl">Loading order history...</p>
                            ) : (
                                orderHistory.length === 0 ? (
                                    <p className="text-gray-400 text-center text-lg md:text-xl">You haven't placed any orders yet.</p>
                                ) : (
                                    <div className="space-y-8">
                                        {orderHistory.map((order) => (
                                            <div key={order.id} className="bg-gray-800 p-6 rounded-xl shadow-lg border border-gray-700">
                                                <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 pb-4 border-b border-gray-700">
                                                    <div>
                                                        {/* Display Firestore orderId if available, otherwise fallback to local ID */}
                                                        <h3 className="text-xl md:text-2xl font-semibold text-yellow-300">Order ID: {order.orderId || order.id}</h3>
                                                        <p className="text-gray-400 text-sm md:text-base">Date: {order.date} at {order.time}</p>
                                                        {order.status && (
                                                            <p className={`text-sm md:text-base font-semibold ${order.status === 'finished' ? 'text-green-400' : 'text-orange-400'}`}>
                                                                Status: {order.status.replace(/_/g, ' ').toUpperCase()}
                                                            </p>
                                                        )}
                                                    </div>
                                                    <span className="text-xl md:text-2xl font-bold text-yellow-400 mt-2 sm:mt-0">Total: ${order.total}</span>
                                                </div>
                                                <div className="space-y-3 max-h-60 overflow-y-auto custom-scrollbar pr-2">
                                                    {order.items.map(item => (
                                                        <div key={item.id} className="flex justify-between items-center text-gray-300 text-base md:text-lg">
                                                            <span>{item.name} <span className="text-yellow-300">x{item.quantity}</span></span>
                                                            <span>{item.price === 0.00 ? 'Free' : `$${(item.price * item.quantity).toFixed(2)}`}</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )
                            )}
                        </div>
                    </section>


                    {/* Contact Section */}
                    <section id="contact" className="py-16 md:py-20 bg-gray-900 text-center px-4">  
                        <div className="container mx-auto">
                            <h2 className="text-3xl sm:text-4xl font-bold text-yellow-400 mb-6 md:mb-8">Get in Touch ðŸ’¬</h2>  
                            <p className="text-gray-300 text-base md:text-lg mb-6 md:mb-8 max-w-2xl mx-auto">  
                                Have questions about our software or need assistance? Contact us today!
                            </p>
                            <a href="https://t.me/EmvResellers" target="_blank" rel="noopener noreferrer" className="inline-block bg-yellow-500 text-gray-900 font-bold py-3 px-8 rounded-full shadow-lg hover:bg-yellow-600 transition duration-300 transform hover:scale-105 text-base sm:text-lg">
                                Contact us Via Telegram
                            </a>
                        </div>
                    </section>

                    {/* Footer */}
                    <footer className="bg-gray-950 py-6 text-center text-gray-400 px-4">  
                        <div className="container mx-auto flex flex-col sm:flex-row justify-center items-center space-y-2 sm:space-y-0 sm:space-x-4">
                            <p className="text-sm sm:text-base">&copy; 2025 EmvResellers. All rights reserved.</p>  
                            {userId && ( // Only show User ID if it's available
                                <p className="text-xs text-gray-500 mt-2 sm:mt-0 sm:ml-4">Your User ID: {userId}</p>
                            )}
                            <button
                                onClick={() => setIsLegalModalOpen(true)}
                                className="text-gray-400 hover:text-yellow-400 transition-colors duration-300 text-sm focus:outline-none"
                            >
                                Legal & Privacy
                            </button>
                        </div>
                    </footer>

                    {/* Cart Modal */}
                    {isCartOpen && (
                        <div className="fixed inset-0 bg-gray-900 bg-opacity-75 flex justify-center items-center z-50 p-4">
                            <div className="bg-gray-800 rounded-lg shadow-xl w-full max-w-sm md:max-w-lg p-5 md:p-6 relative">  
                                <h2 className="text-2xl md:text-3xl font-bold text-yellow-400 mb-5 md:mb-6">Your Cart</h2>  
                                <button
                                    onClick={() => setIsCartOpen(false)}
                                    className="absolute top-3 right-3 md:top-4 md:right-4 text-gray-400 hover:text-gray-200 transition duration-300"  
                                    aria-label="Close cart"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-7 w-7 md:h-8 md:w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>

                                {cart.length === 0 ? (
                                    <p className="text-gray-400 text-base md:text-lg">Your cart is empty.</p>
                                ) : (
                                    <>
                                        <ul className="space-y-3 md:space-y-4 max-h-72 md:max-h-80 overflow-y-auto mb-5 md:mb-6 custom-scrollbar">  
                                            {cart.map(item => (
                                                <li key={item.id} className="flex justify-between items-center bg-gray-700 p-3 rounded-lg text-sm md:text-base">  
                                                    <div>
                                                        <p className="font-semibold text-gray-100">{item.name} <span className="text-yellow-300">x{item.quantity}</span></p>
                                                        <p className="text-gray-300 text-xs md:text-sm">
                                                            {item.price === 0.00 ? 'Free' : `$${(item.price * item.quantity).toFixed(2)}`}
                                                        </p>
                                                    </div>
                                                    <button
                                                        onClick={() => removeFromCart(item.id)}
                                                        className="text-red-500 hover:text-red-400 transition duration-300 p-1 md:p-2 rounded-full"  
                                                        aria-label={`Remove ${item.name} from cart`}
                                                    >
                                                        <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5 md:h-6 md:w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                                            <path strokeLinecap="round" strokeLinejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 0 00-1-1h-4a1 0 00-1 1v3M4 7h16" />
                                                        </svg>
                                                    </button>
                                                </li>
                                            ))}
                                        </ul>
                                        <div className="border-t border-gray-700 pt-4 flex justify-between items-center">
                                            <span className="text-xl md:text-2xl font-bold text-yellow-400">Total:</span>  
                                            <span className="text-xl md:text-2xl font-bold text-yellow-400">${totalPrice}</span>  
                                        </div>
                                        <button
                                            className="w-full bg-yellow-500 text-gray-900 font-bold py-2 md:py-3 rounded-lg mt-5 md:mt-6 hover:bg-yellow-600 transition duration-300 transform hover:scale-105 text-base md:text-lg flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed"
                                            onClick={proceedToCheckout}
                                            disabled={isCheckoutLoading}
                                        >
                                            {isCheckoutLoading ? (
                                                <>
                                                    <div className="loader mr-2"></div>
                                                    Processing...
                                                </>
                                            ) : (
                                                "Proceed to Checkout"
                                            )}
                                        </button>
                                    </>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Image Viewer Modal */}
                    {isImageViewerOpen && currentImageViewProduct && (
                        <div className="fixed inset-0 bg-gray-950 bg-opacity-80 flex justify-center items-center z-50 p-4">
                            <div className="bg-gray-800 rounded-lg shadow-xl relative p-4 image-viewer-modal-content flex flex-col items-center">
                                {/* Close Button */}
                                <button
                                    onClick={closeImageViewer}
                                    className="absolute top-2 right-2 md:top-4 md:right-4 text-gray-400 hover:text-gray-200 transition duration-300 p-2 rounded-full bg-gray-700 hover:bg-gray-600"
                                    aria-label="Close image viewer"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>

                                {/* Image Title */}
                                <h3 className="text-xl md:text-2xl font-bold text-yellow-400 mb-3 text-center">
                                    {currentImageViewProduct.name} - Image {currentImageIndex + 1} of {currentImageViewProduct.images.length}
                                </h3>
                                
                                {/* Image Display */}
                                <div className="relative flex items-center justify-center w-full">
                                    {/* Previous Button */}
                                    {currentImageViewProduct.images.length > 1 && (
                                        <button
                                            onClick={prevImage}
                                            className="absolute left-0 top-1/2 -translate-y-1/2 p-2 bg-gray-700 bg-opacity-75 rounded-full text-white hover:bg-opacity-100 transition duration-300 z-10 ml-2"
                                            aria-label="Previous image"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                                <path strokeLinecap="round" strokeLinejoin="round" d="M15 19l-7-7 7-7" />
                                            </svg>
                                        </button>
                                    )}

                                    <img  
                                        src={currentImageViewProduct.images[currentImageIndex]}  
                                        alt={`${currentImageViewProduct.name} Screenshot ${currentImageIndex + 1}`}
                                        className="image-viewer-modal-image rounded-md shadow-lg"
                                        onError={(e) => { e.target.onerror = null; e.target.src="https://placehold.co/600x400/808080/FFF?text=Image+Not+Found"; }}
                                    />

                                    {/* Next Button */}
                                    {currentImageViewProduct.images.length > 1 && (
                                        <button
                                            onClick={nextImage}
                                            className="absolute right-0 top-1/2 -translate-y-1/2 p-2 bg-gray-700 bg-opacity-75 rounded-full text-white hover:bg-opacity-100 transition duration-300 z-10 mr-2"
                                            aria-label="Next image"
                                        >
                                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                                <path strokeLinecap="round" strokeLinejoin="round" d="M9 5l7 7-7 7" />
                                            </svg>
                                        </button>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Legal & Privacy Modal */}
                    {isLegalModalOpen && (
                        <div className="fixed inset-0 bg-gray-900 bg-opacity-75 flex justify-center items-center z-50 p-4">
                            <div className="bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl lg:max-w-4xl h-5/6 flex flex-col relative p-6">
                                {/* Close Button */}
                                <button
                                    onClick={() => setIsLegalModalOpen(false)}
                                    className="absolute top-3 right-3 text-gray-400 hover:text-gray-200 transition duration-300 p-2 rounded-full bg-gray-700 hover:bg-gray-600"
                                    aria-label="Close legal and privacy modal"
                                >
                                    <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                        <path strokeLinecap="round" strokeLinejoin="round" d="M6 18L18 6M6 6l12 12" />
                                    </svg>
                                </button>

                                {/* Tab Navigation */}
                                <div className="flex border-b border-gray-700 mb-4">
                                    <button
                                        onClick={() => setCurrentLegalTab('terms')}
                                        className={`py-2 px-4 text-lg font-semibold rounded-t-lg transition-colors duration-200 ${currentLegalTab === 'terms' ? 'bg-gray-700 text-yellow-400' : 'text-gray-400 hover:text-yellow-300'}`}
                                    >
                                        Terms of Service
                                    </button>
                                    <button
                                        onClick={() => setCurrentLegalTab('privacy')}
                                        className={`py-2 px-4 text-lg font-semibold rounded-t-lg transition-colors duration-200 ${currentLegalTab === 'privacy' ? 'bg-gray-700 text-yellow-400' : 'text-gray-400 hover:text-yellow-300'}`}
                                    >
                                        Privacy Policy
                                    </button>
                                </div>

                                {/* Content Area */}
                                <div className="flex-grow overflow-y-auto custom-scrollbar p-2">
                                    {currentLegalTab === 'terms' && (
                                        <div className="text-gray-300 text-sm md:text-base leading-relaxed"
                                            dangerouslySetInnerHTML={{ __html: termsOfServiceContent.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br/>') }}>
                                        </div>
                                    )}
                                    {currentLegalTab === 'privacy' && (
                                        <div className="text-gray-300 text-sm md:text-base leading-relaxed"
                                            dangerouslySetInnerHTML={{ __html: privacyPolicyContent.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/\n/g, '<br/>') }}>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Scroll-to-Top Button */}
                    {showScrollToTop && (
                        <button
                            onClick={scrollToTop}
                            className="fixed bottom-4 right-4 md:bottom-8 md:right-8 bg-yellow-500 text-gray-900 p-3 rounded-full shadow-lg hover:bg-yellow-600 transition-all duration-300 transform hover:scale-110 z-40 focus:outline-none focus:ring-2 focus:ring-yellow-500"
                            aria-label="Scroll to top"
                        >
                            <svg xmlns="http://www.w3.org/2000/svg" className="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" strokeWidth="2">
                                <path strokeLinecap="round" strokeLinejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
                            </svg>
                        </button>
                    )}
                </div>
            );
        }

        // Mount the React App to the 'root' div in the HTML
        // Using React 18's createRoot for modern rendering
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
